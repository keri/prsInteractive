include required(classpath("application"))

backend {
  default = Local

  providers {
    Local {
      actor-factory = "cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory"
      config {
        runtime-attributes = """
        String? docker
        """
        
        submit-docker = """
        docker run \
          --rm -i \
          -v ${cwd}:${docker_cwd} \
          -v $PRS_INTERACTIVE_HOME:/prsInteractive \
          -w ${docker_cwd} \
          ${docker} /bin/bash execution/script
        """
        
        
        # Root directory where Cromwell writes job results - relative to where you run cromwell
        root = "./cromwell-executions"
        
        # File system configuration
        filesystems {
          local {
            localization: [
              "hard-link", "soft-link", "copy"
            ]
            caching {
              duplication-strategy: [
                "hard-link", "soft-link", "copy"
              ]
              hashing-strategy: "md5"
              check-sibling-md5: false
            }
          }
        }
      }
    }
  }
}