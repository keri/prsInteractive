# Minimal Cromwell configuration that avoids memory specification issues
backend {
    default = "Local"
    
    providers {
        Local {
            actor-factory = "cromwell.backend.impl.sfs.config.ConfigBackendLifecycleActorFactory"
            config {
                # Don't specify memory defaults - let WDL tasks specify them
                runtime-attributes = """
                    String? docker
                    Int? cpu
                    String? memory
                    String? disk
                """
                
                submit-docker = """
                    docker run \
                        --rm \
                        ${if defined(cpu) then "--cpus=" + cpu else ""} \
                        ${if defined(memory) then "--memory=" + memory else ""} \
                        -v ${cwd}:${docker_cwd} \
                        -w ${docker_cwd} \
                        ${docker} \
                        /bin/bash ${script}
                """
                
                concurrent-job-limit = 1
            }
        }
    }
}

database {
    profile = "slick.jdbc.HsqldbProfile$"
    db {
        driver = "org.hsqldb.jdbcDriver"
        url = "jdbc:hsqldb:mem:cromwell-db;shutdown=true;hsqldb.tx=mvcc"
        connectionTimeout = 1000
    }
}